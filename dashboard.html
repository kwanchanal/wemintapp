<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard | wemint.app</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500;600;700&family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,400,0,0&display=swap" rel="stylesheet">
    <style>
        body {
            background: var(--bg-primary);
        }

        /* Two Column Layout with Preview */
        .main-content {
            display: grid;
            grid-template-columns: minmax(0, 1fr) 480px;
            gap: 2rem;
            align-items: start;
        }

        .content-area {
            min-width: 0;
        }

        /* Preview Section - Your Page */
        .preview-section {
            position: sticky;
            top: 2rem;
        }

        .preview-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1rem;
        }

        .preview-title {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .preview-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 0.75rem;
            background: var(--bg-tertiary);
            border-radius: var(--radius-md);
            font-size: 0.8125rem;
            color: var(--text-secondary);
            transition: var(--transition-base);
        }

        .preview-link:hover {
            background: var(--border-color);
            color: var(--text-primary);
        }

        .preview-card {
            background: #0f1115;
            border-radius: var(--radius-xl);
            border: 1px solid #1f2430;
            overflow: hidden;
        }

        .preview-url-bar {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            background: #151925;
            border-bottom: 1px solid #1f2430;
        }

        .url-dots {
            display: flex;
            gap: 0.375rem;
        }

        .url-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--border-color);
        }

        .url-dot.red { background: #ff5f56; }
        .url-dot.yellow { background: #ffbd2e; }
        .url-dot.green { background: #27ca40; }

        .url-input {
            flex: 1;
            padding: 0.375rem 0.75rem;
            background: #0f1115;
            border: 1px solid #2a3140;
            border-radius: var(--radius-sm);
            font-size: 0.75rem;
            color: #cbd5f5;
            text-align: center;
        }

        .phone-preview-container {
            padding: 1rem;
            display: flex;
            justify-content: center;
        }

        .phone-mockup {
            width: 350px;
            height: 758px;
            background: #0b0d12;
            border-radius: 40px;
            padding: 10px;
            box-shadow: var(--shadow-xl), 0 0 0 1px rgba(255,255,255,0.08) inset;
        }

        .phone-inner {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 32px;
            overflow: hidden;
            position: relative;
        }

        /* Apple-style minimal scrollbar */
        .phone-iframe {
            scrollbar-width: thin;
            scrollbar-color: rgba(255,255,255,0.3) transparent;
        }

        .phone-iframe::-webkit-scrollbar {
            width: 6px;
        }

        .phone-iframe::-webkit-scrollbar-track {
            background: transparent;
        }

        .phone-iframe::-webkit-scrollbar-thumb {
            background: rgba(255,255,255,0.3);
            border-radius: 3px;
        }

        .phone-iframe::-webkit-scrollbar-thumb:hover {
            background: rgba(255,255,255,0.5);
        }

        .phone-notch {
            position: absolute;
            top: 12px;
            left: 50%;
            transform: translateX(-50%);
            width: 90px;
            height: 24px;
            background: #0b0d12;
            border-radius: 12px;
            z-index: 10;
        }

        .phone-iframe {
            width: 100%;
            height: 100%;
            border: none;
            border-radius: 32px;
        }

        .preview-actions {
            display: flex;
            gap: 0.5rem;
            padding: 1rem;
            border-top: 1px solid #1f2430;
            background: #0f1115;
        }

        .preview-actions button {
            flex: 1;
            padding: 0.625rem;
            font-size: 0.8125rem;
            border-radius: var(--radius-md);
        }

        .btn-copy-link {
            background: var(--primary);
            color: white;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: var(--transition-base);
        }

        .btn-copy-link:hover {
            background: var(--primary-dark);
        }

        .btn-share {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            font-weight: 500;
            border: 1px solid var(--border-color);
            cursor: pointer;
            transition: var(--transition-base);
        }

        .btn-share:hover {
            background: var(--border-color);
        }

        /* Cute Gumroad-ish polish */
        body {
            background: #f7f3ee;
            font-family: "Google Sans", "Inter", system-ui, sans-serif;
        }

        input,
        textarea,
        select,
        button {
            font-family: inherit;
        }

        .dashboard-layout {
            background: transparent;
        }

        .sidebar {
            background: #111111;
            border-right: 1px solid #1f1f1f;
            color: #ffffff;
        }

        .nav-item {
            color: #e5e7eb;
        }

        .nav-item:hover {
            background: rgba(255, 255, 255, 0.08);
            color: #ffffff;
        }

        .nav-item.active {
            background: #ff9be7;
            color: #1f1f1f;
            border: 1px solid #111111;
        }

        .material-symbols-outlined {
            font-variation-settings: "FILL" 0, "wght" 400, "GRAD" 0, "opsz" 20;
            font-size: 18px;
            line-height: 1;
        }

        .sidebar-nav {
            display: grid;
            gap: 0.35rem;
        }

        .nav-item {
            padding: 0.8rem 0.9rem;
            border-radius: 12px;
            border: 1px solid transparent;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }

        .nav-item:last-child {
            border-bottom: none;
        }

        .sidebar-logo {
            color: #ffffff;
            font-size: 1rem;
            font-weight: 600;
        }

        .page-title {
            font-size: 1.6rem;
            letter-spacing: -0.01em;
            margin: 0;
        }

        .page-header {
            margin-top: -0.35rem;
        }

        .stat-card {
            background: #ffffff;
            border: 2px solid #111111;
            box-shadow: none;
            border-radius: 14px;
        }

        .stat-card-header {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            margin-bottom: 0.35rem;
        }

        .stat-icon {
            color: #111111;
            font-size: 18px;
        }

        .dashboard-card {
            background: #ffffff;
            border: 2px solid #111111;
            border-radius: 14px;
            box-shadow: none;
            overflow: hidden;
        }

        .card-header {
            border-bottom: 2px solid #111111;
            background: #fff7e8;
            border-top-left-radius: 12px;
            border-top-right-radius: 12px;
        }

        .card-title {
            font-size: 0.95rem;
            letter-spacing: 0;
        }

        .btn-primary {
            background: #ff9be7;
            color: #111111;
            box-shadow: none;
            border-radius: 10px;
            border: 2px solid #111111;
        }

        .btn-primary:hover {
            transform: none;
            box-shadow: none;
        }

        .btn-header-action {
            min-width: 180px;
            display: inline-flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.5rem;
            padding: 0.6rem 0.9rem;
        }

        .btn-secondary {
            background: #ffffff;
            border: 2px solid #111111;
            border-radius: 10px;
            box-shadow: none;
        }

        .quick-action-card {
            background: #ffffff;
            border: 2px solid #111111;
            border-radius: 12px;
            box-shadow: none;
        }

        .quick-action-card.primary {
            background: #fff3b0;
        }

        .qa-icon {
            font-size: 1.1rem;
        }

        .section-toggle-item {
            background: #ffffff;
            border: 2px solid #111111;
            border-radius: 12px;
        }

        .products-table th {
            font-size: 0.7rem;
            letter-spacing: 0.08em;
        }

        .products-table {
            border-collapse: separate;
            border-spacing: 0;
        }

        .products-table tbody tr {
            background: #ffffff;
        }

        .products-table tbody tr:hover {
            background: #fff7e8;
        }

        .table-actions .btn-icon {
            border-radius: 10px;
            border: 1.5px solid #111111;
        }

        .social-icon-pill {
            background: #ffffff;
            border: 2px solid #111111;
            box-shadow: none;
        }

        .appearance-block {
            background: #ffffff;
            border: 2px solid #111111;
            border-radius: 14px;
            padding: 0.9rem;
        }

        .appearance-block + .appearance-block {
            margin-top: 1rem;
        }

        .section-toggle-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 0.75rem 1rem;
        }

        .section-toggle-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 1rem;
            padding: 0.75rem 1rem;
            background: var(--bg-tertiary);
            border-radius: var(--radius-md);
            border: 1px solid var(--border-color);
        }

        .section-toggle-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-weight: 600;
            color: var(--text-primary);
            font-size: 0.875rem;
        }

        .toggle-switch {
            position: relative;
            width: 44px;
            height: 24px;
        }

        .toggle-switch input {
            position: absolute;
            inset: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            margin: 0;
            cursor: pointer;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            inset: 0;
            background: #cbd5f5;
            border-radius: 999px;
            transition: 0.2s ease;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            top: 3px;
            background: white;
            border-radius: 50%;
            transition: 0.2s ease;
            box-shadow: var(--shadow-sm);
        }

        .toggle-switch input:checked + .toggle-slider {
            background: var(--primary);
        }

        .toggle-switch input:checked + .toggle-slider:before {
            transform: translateX(20px);
        }

        .section-visibility-toggle {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .section-visibility-toggle .toggle-label {
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .quick-actions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 0.75rem;
        }

        .quick-action-card {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 0.75rem;
            padding: 0.9rem 1rem;
            border-radius: var(--radius-md);
            border: 1px solid var(--border-color);
            background: var(--bg-secondary);
            font-weight: 600;
            color: var(--text-primary);
            transition: var(--transition-base);
            box-shadow: var(--shadow-sm);
        }

        .quick-action-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            border-color: rgba(99, 102, 241, 0.35);
        }

        .quick-action-card .qa-icon {
            font-size: 1.25rem;
        }

        .quick-action-card.primary {
            background: rgba(99, 102, 241, 0.08);
        }

        .dashboard-card[data-accordion] .card-header {
            cursor: pointer;
        }

        .dashboard-card.is-collapsed .accordion-body {
            display: none;
        }

        .preview-section .stats-grid {
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 0.75rem;
        }

        .preview-section .stat-card {
            padding: 0.9rem;
        }

        .mint-setup-card .card-header {
            background: #4f46e5;
        }

        .mint-setup-card .card-header .card-title,
        .mint-setup-card .card-header p {
            color: #ffffff !important;
        }

        .mint-setup-card .card-header .card-title {
            font-size: 1rem;
        }

        .mint-setup-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 0.9rem;
        }

        .mint-setup-option {
            background: #ffffff;
            border: 2px solid #111111;
            border-radius: 16px;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .mint-setup-option small {
            color: var(--text-muted);
            font-size: 0.75rem;
        }

        .mint-setup-option .option-title {
            font-weight: 700;
            font-size: 0.95rem;
            color: var(--text-primary);
        }

        .mint-setup-option .option-desc {
            font-size: 0.8125rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }

        .mint-setup-option .btn-primary,
        .mint-setup-option .btn-secondary {
            width: 100%;
            margin-top: 0.5rem;
        }

        .mint-setup-faq details {
            background: #f1ede8;
            border-radius: 12px;
            padding: 0.75rem 1rem;
            border: 1px solid #111111;
        }

        .mint-setup-faq details + details {
            margin-top: 0.6rem;
        }

        .mint-setup-faq summary {
            font-weight: 600;
            cursor: pointer;
            list-style: none;
        }

        .mint-setup-faq summary::-webkit-details-marker {
            display: none;
        }

        .mint-setup-faq p {
            margin: 0.5rem 0 0;
            color: var(--text-secondary);
            font-size: 0.8125rem;
        }

        .mint-settings-grid {
            display: grid;
            grid-template-columns: minmax(0, 1.1fr) minmax(0, 0.9fr);
            gap: 1rem;
        }

        .mint-settings-card {
            background: #ffffff;
            border: 2px solid #111111;
            border-radius: 14px;
            padding: 1rem;
        }

        .mint-settings-label {
            font-size: 0.8125rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 0.35rem;
        }

        .mint-mode-list {
            display: grid;
            gap: 0.6rem;
            margin-bottom: 1rem;
        }

        .mint-mode-option {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            border: 2px solid #111111;
            border-radius: 12px;
            padding: 0.75rem 0.9rem;
            background: #ffffff;
        }

        .mint-mode-option.selected {
            background: #fff7e8;
        }

        .mint-mode-option.disabled {
            background: #f3f4f6;
            border-color: #e5e7eb;
            color: #9ca3af;
            cursor: not-allowed;
        }

        .mint-mode-option.disabled input {
            pointer-events: none;
        }

        .mint-mode-option input {
            width: 16px;
            height: 16px;
        }

        .mint-preview {
            background: #111111;
            border-radius: 12px;
            padding: 1rem;
            display: flex;
            justify-content: center;
        }

        .mint-preview.is-hidden {
            display: none;
        }

        .mint-preview-card {
            width: 220px;
            background: #ffffff;
            border-radius: 0 0 12px 12px;
            padding: 0.75rem;
            padding-top: calc(0.75rem + 10px);
            display: grid;
            gap: 0.5rem;
            --scallop-r: 10px;
            --scallop-w: 31.43px;
            -webkit-mask:
                radial-gradient(circle at 50% 0, transparent var(--scallop-r), black calc(var(--scallop-r) + 0.5px))
                0 0 / var(--scallop-w) 100%;
            mask:
                radial-gradient(circle at 50% 0, transparent var(--scallop-r), black calc(var(--scallop-r) + 0.5px))
                0 0 / var(--scallop-w) 100%;
        }

        .mint-preview-card input,
        .mint-preview-card textarea {
            width: 100%;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 0.5rem 0.6rem;
            font-size: 0.75rem;
            background: #f6f3ef;
        }

        .mint-preview-card button {
            background: #111111;
            color: #ffffff;
            border-radius: 999px;
            padding: 0.55rem 0.75rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .mint-setting-row {
            display: grid;
            gap: 0.5rem;
            margin-bottom: 0.85rem;
        }

        .mint-setting-row input,
        .mint-setting-row select,
        .mint-setting-row textarea {
            width: 100%;
            padding: 0.65rem 0.75rem;
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-size: 0.875rem;
        }

        .mint-setting-actions {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .mint-settings-panel.is-hidden {
            display: none;
        }

        .mint-action-pill {
            background: #fff7e8;
            border: 1px solid var(--border-color);
            border-radius: 999px;
            padding: 0.4rem 0.7rem;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .section-divider {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin: 0.25rem 0 0.75rem;
        }

        .section-divider::before,
        .section-divider::after {
            content: "";
            flex: 1;
            height: 2px;
            background: #111111;
            opacity: 0.25;
            border-radius: 999px;
        }

        .section-divider-badge {
            background: #111111;
            color: #ffffff;
            border-radius: 999px;
            padding: 0.4rem 0.8rem;
            font-size: 0.75rem;
            font-weight: 700;
            letter-spacing: 0.04em;
            text-transform: uppercase;
            white-space: nowrap;
        }

        .section-divider-copy {
            text-align: center;
            margin-top: 0.5rem;
            color: var(--text-secondary);
            font-size: 0.8125rem;
        }

        .section-divider.identity {
            margin-bottom: 0.5rem;
        }

        /* Responsive - hide preview on smaller screens */
        @media (max-width: 1200px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            .preview-section {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-logo">
                wemint.app
            </div>

            <nav class="sidebar-nav">
                <a href="#dashboardTop" class="nav-item active" data-target="dashboardTop">
                    <span class="icon material-symbols-outlined">dashboard</span>
                    <span>Dashboard</span>
                </a>
                <a href="#payoutSection" class="nav-item" data-target="payoutSection">
                    <span class="icon material-symbols-outlined">payments</span>
                    <span>Payout</span>
                </a>
                <a href="#mintSettingsSection" class="nav-item" data-target="mintSettingsSection">
                    <span class="icon material-symbols-outlined">auto_awesome</span>
                    <span>Mint Settings</span>
                </a>
                <a href="#appearanceSection" class="nav-item" data-target="appearanceSection">
                    <span class="icon material-symbols-outlined">palette</span>
                    <span>Appearance</span>
                </a>
                <a href="#profileSettingsSection" class="nav-item" data-target="profileSettingsSection">
                    <span class="icon material-symbols-outlined">account_circle</span>
                    <span>Profile</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Left Column - Content Area -->
            <div class="content-area">
                <!-- Page Header -->
                <div class="page-header" id="dashboardTop">
                    <h1 class="page-title">Dashboard</h1>
                </div>

                <!-- Ready to Get Minted -->
                <div class="dashboard-card mint-setup-card" id="payoutSection">
                    <div class="card-header">
                        <div>
                            <h2 class="card-title">Ready to get minted?</h2>
                            <p style="font-size: 0.8125rem; color: var(--text-muted); margin-top: 0.25rem;">
                                You get paid directly and instantly into your own linked account. We never process or hold funds, so no waiting around for payouts!
                            </p>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="mint-setup-grid" style="margin-bottom: 1rem;">
                            <div class="mint-setup-option">
                                <div class="option-title">Payout Wallet</div>
                                <div class="option-desc">Supporters can pay in USDC or USDT. You receive directly to this address.</div>
                                <small>Supported: Solana, Polygon, Base, Tron, Ethereum, BSC</small>
                                <div style="display: grid; gap: 0.6rem;">
                                    <label style="font-size: 0.8125rem; color: var(--text-secondary);">Wallet address</label>
                                    <input type="text" placeholder="0x... or wallet address" style="width: 100%; padding: 0.65rem 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); font-size: 0.875rem;">
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem;">
                                        <div>
                                            <label style="font-size: 0.75rem; color: var(--text-secondary);">Network</label>
                                            <select style="width: 100%; padding: 0.55rem 0.65rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); font-size: 0.8125rem;">
                                                <option>Solana</option>
                                                <option>Polygon</option>
                                                <option>Base</option>
                                                <option>Tron</option>
                                                <option>Ethereum</option>
                                                <option>BSC</option>
                                            </select>
                                        </div>
                                        <div>
                                            <label style="font-size: 0.75rem; color: var(--text-secondary);">Preferred stablecoin</label>
                                            <select style="width: 100%; padding: 0.55rem 0.65rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); font-size: 0.8125rem;">
                                                <option>USDC</option>
                                                <option>USDT</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <button class="btn-primary btn-header-action" onclick="saveAppearanceSettings()">
                                    <span>Save Wallet</span>
                                    <span>+</span>
                                </button>
                            </div>
                            <div class="mint-setup-option">
                                <div class="option-title">Payout Bank</div>
                                <div class="option-desc">Optional fallback if a supporter can't use wallet.</div>
                                <small>Choose your bank country</small>
                                <div style="display: grid; gap: 0.6rem;">
                                    <label style="font-size: 0.8125rem; color: var(--text-secondary);">Bank country</label>
                                    <select style="width: 100%; padding: 0.65rem 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); font-size: 0.875rem;">
                                        <option>Thailand</option>
                                        <option>Singapore</option>
                                        <option>United States</option>
                                        <option>United Kingdom</option>
                                        <option>Japan</option>
                                        <option>Australia</option>
                                    </select>
                                </div>
                                <div style="display: grid; gap: 0.6rem;">
                                    <div>
                                        <label style="font-size: 0.75rem; color: var(--text-secondary);">Bank name</label>
                                        <select style="width: 100%; padding: 0.55rem 0.65rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); font-size: 0.8125rem;">
                                            <option>SCB (Siam Commercial Bank)</option>
                                            <option>Kasikorn (KBank)</option>
                                            <option>Bangkok Bank</option>
                                            <option>Krungthai (KTB)</option>
                                            <option>Krungsri (BAY)</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label style="font-size: 0.75rem; color: var(--text-secondary);">Account holder name</label>
                                        <input type="text" placeholder="e.g., Creative Studio" style="width: 100%; padding: 0.55rem 0.65rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); font-size: 0.8125rem;">
                                    </div>
                                    <div>
                                        <label style="font-size: 0.75rem; color: var(--text-secondary);">Account number</label>
                                        <input type="text" placeholder="e.g., 123-4-56789-0" style="width: 100%; padding: 0.55rem 0.65rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); font-size: 0.8125rem;">
                                    </div>
                                </div>
                                <button class="btn-secondary btn-header-action" onclick="saveAppearanceSettings()">
                                    <span>Save Bank</span>
                                    <span>+</span>
                                </button>
                            </div>
                        </div>
                        <div class="mint-setup-faq">
                            <details>
                                <summary>Why do I need a payment method?</summary>
                                <p>Your bio link is payment-first. Connect a wallet so supporters can mint you instantly, then your page becomes sell-ready.</p>
                            </details>
                            <details>
                                <summary>Can I change my wallet later?</summary>
                                <p>Yes. You can update your receiving wallet at any time, and new mints will route to the latest address.</p>
                            </details>
                            <details>
                                <summary>I don't have a wallet yet.</summary>
                                <p>No problem. Start with bank details, or create a wallet in a minute and connect it here.</p>
                            </details>
                        </div>
                    </div>
                </div>

                <!-- Mint Settings -->
                <div class="dashboard-card is-collapsed" data-accordion id="mintSettingsSection">
                    <div class="card-header">
                        <div>
                            <h2 class="card-title">Mint Settings</h2>
                            <p style="font-size: 0.8125rem; color: var(--text-muted); margin-top: 0.25rem;">Customize the mint panel on your page</p>
                        </div>
                        <div style="display: flex; gap: 0.75rem; align-items: center;">
                            <label class="section-visibility-toggle">
                                <span class="toggle-label">Show</span>
                                <span class="toggle-switch">
                                    <input type="checkbox" id="toggleMint" onchange="toggleSectionVisibility('mint', this)">
                                    <span class="toggle-slider"></span>
                                </span>
                            </label>
                            <button class="btn-primary btn-header-action" onclick="saveAppearanceSettings()">
                                <span>Save Mint</span>
                                <span>+</span>
                            </button>
                        </div>
                    </div>
                    <div class="card-body accordion-body">
                        <div class="mint-settings-grid">
                            <div class="mint-settings-card">
                                <div class="mint-settings-label">Choose a tip mode</div>
                                <div class="mint-mode-list">
                                    <label class="mint-mode-option disabled" data-mode="metaphor">
                                        <input type="radio" name="mintMode" value="metaphor" disabled>
                                        <div>
                                            <div style="font-weight: 600; font-size: 0.875rem;">Mint metaphor</div>
                                            <div style="font-size: 0.75rem; color: var(--text-secondary);">Use the “Mint a…” metaphor</div>
                                        </div>
                                    </label>
                                    <label class="mint-mode-option selected" data-mode="simple">
                                        <input type="radio" name="mintMode" value="simple" checked>
                                        <div>
                                            <div style="font-weight: 600; font-size: 0.875rem;">Simple tip</div>
                                            <div style="font-size: 0.75rem; color: var(--text-secondary);">Traditional tip flow with suggested amounts</div>
                                        </div>
                                    </label>
                                </div>

                                <div class="mint-preview mint-preview-metaphor is-hidden">
                                    <div class="mint-preview-card">
                                        <div style="font-size: 0.75rem; font-weight: 600;" id="mintPreviewMetaphorTitle">Mint a coffee for @creativestudio</div>
                                        <div style="font-size: 0.7rem; color: var(--text-secondary);" id="mintPreviewMetaphorUnit">$5 each</div>
                                        <textarea rows="2" placeholder="Your message"></textarea>
                                        <button id="mintPreviewMetaphorButton">Mint</button>
                                    </div>
                                </div>

                                <div class="mint-preview mint-preview-simple">
                                    <div class="mint-preview-card">
                                        <div style="font-size: 0.75rem; font-weight: 600;">Support @creativestudio</div>
                                        <div style="display: flex; gap: 0.25rem; flex-wrap: wrap;">
                                            <span class="mint-action-pill">$5</span>
                                            <span class="mint-action-pill">$10</span>
                                            <span class="mint-action-pill">$15</span>
                                        </div>
                                        <input type="text" value="$ 5">
                                        <textarea rows="2" placeholder="Your message"></textarea>
                                        <button id="mintPreviewSimpleButton">Mint</button>
                                    </div>
                                </div>
                            </div>

                            <div class="mint-settings-card">
                                <div class="mint-settings-panel mint-settings-metaphor is-hidden">
                                    <div class="mint-setting-row">
                                        <div class="mint-settings-label">Buy me a...</div>
                                        <input type="text" id="mintMetaphorLabel" value="Coffee">
                                    </div>

                                    <div class="mint-setting-row">
                                        <div class="mint-settings-label">Default unit price</div>
                                        <input type="text" id="mintMetaphorUnitPrice" value="5">
                                    </div>

                                    <div class="mint-setting-row">
                                        <div class="mint-settings-label">Minimum price</div>
                                        <input type="text" id="mintMetaphorMinPrice" value="5">
                                    </div>

                                    <div class="mint-setting-row">
                                        <div class="mint-settings-label">Button wording</div>
                                        <select id="mintButtonWordingMetaphor">
                                            <option>Mint</option>
                                            <option>Tip</option>
                                            <option>Support</option>
                                        </select>
                                    </div>

                                    <div class="mint-setting-row">
                                        <div class="mint-settings-label">Thank you message</div>
                                        <textarea id="mintThankYouMetaphor" rows="3" placeholder="E.g. Thanks! Your support helps me keep doing what I love."></textarea>
                                    </div>
                                </div>

                                <div class="mint-settings-panel mint-settings-simple">
                                    <div class="mint-setting-row">
                                        <div class="mint-settings-label">Suggested amounts</div>
                                        <div style="display: flex; justify-content: space-between; align-items: center;">
                                            <div style="font-size: 0.75rem; color: var(--text-secondary);">Turn on suggested amounts</div>
                                            <label class="toggle-switch">
                                                <input type="checkbox" checked>
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>

                                    <div class="mint-setting-row">
                                        <div class="mint-settings-label">Choose 3 amounts</div>
                                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.5rem;">
                                            <input type="text" id="mintAmount1" value="5">
                                            <input type="text" id="mintAmount2" value="10">
                                            <input type="text" id="mintAmount3" value="15">
                                        </div>
                                    </div>

                                    <div class="mint-setting-row">
                                        <div class="mint-settings-label">Minimum price</div>
                                        <input type="text" id="mintSimpleMinPrice" value="5">
                                    </div>

                                    <div class="mint-setting-row">
                                        <div class="mint-settings-label">Button wording</div>
                                        <select id="mintButtonWordingSimple">
                                            <option>Mint</option>
                                            <option>Tip</option>
                                            <option>Support</option>
                                        </select>
                                    </div>

                                    <div class="mint-setting-row">
                                        <div class="mint-settings-label">Thank you message</div>
                                        <textarea id="mintThankYouSimple" rows="3" placeholder="E.g. Thanks! Your support helps me keep doing what I love."></textarea>
                                    </div>

                                    <div class="mint-setting-row">
                                        <div class="mint-settings-label">Monthly tips</div>
                                        <div style="display: flex; justify-content: space-between; align-items: center;">
                                            <span class="mint-action-pill">Monthly tips active</span>
                                            <label class="toggle-switch">
                                                <input type="checkbox">
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>

                                    <div class="mint-setting-row">
                                        <div class="mint-settings-label">Advanced</div>
                                        <div style="display: flex; justify-content: space-between; align-items: center;">
                                            <div style="font-size: 0.75rem; color: var(--text-secondary);">Enable contributor perks</div>
                                            <label class="toggle-switch">
                                                <input type="checkbox" checked>
                                                <span class="toggle-slider"></span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            <!-- Appearance Settings -->
            <div>
                <div class="section-divider identity">
                    <span class="section-divider-badge">SHOW WHO YOU ARE</span>
                </div>
            </div>

            <div class="dashboard-card is-collapsed" id="appearanceSection" data-accordion>
                <div class="card-header">
                    <div>
                        <h2 class="card-title">Appearance</h2>
                        <p style="font-size: 0.8125rem; color: var(--text-muted); margin-top: 0.25rem;">Customize how your bio page looks</p>
                    </div>
                    <button class="btn-primary btn-header-action" onclick="saveAppearanceSettings()">
                        <span>Save Appearance</span>
                        <span>+</span>
                    </button>
                </div>
                <div class="card-body accordion-body">
                    <div class="appearance-block">
                        <h3 class="block-title">Theme</h3>
                        <div class="theme-grid">
                            <div class="theme-option selected" data-theme="purple-gradient" onclick="selectAppearanceTheme(this)">
                                <div class="theme-preview" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">
                                    <div class="theme-preview-content">
                                        <div class="theme-preview-avatar"></div>
                                        <div class="theme-preview-lines"></div>
                                        <div class="theme-preview-lines"></div>
                                    </div>
                                </div>
                                <div class="theme-name">Purple Gradient</div>
                            </div>

                            <div class="theme-option" data-theme="blue-gradient" onclick="selectAppearanceTheme(this)">
                                <div class="theme-preview" style="background: linear-gradient(135deg, #667eea 0%, #00d4ff 100%);">
                                    <div class="theme-preview-content">
                                        <div class="theme-preview-avatar"></div>
                                        <div class="theme-preview-lines"></div>
                                        <div class="theme-preview-lines"></div>
                                    </div>
                                </div>
                                <div class="theme-name">Ocean Blue</div>
                            </div>

                            <div class="theme-option" data-theme="green-gradient" onclick="selectAppearanceTheme(this)">
                                <div class="theme-preview" style="background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);">
                                    <div class="theme-preview-content">
                                        <div class="theme-preview-avatar"></div>
                                        <div class="theme-preview-lines"></div>
                                        <div class="theme-preview-lines"></div>
                                    </div>
                                </div>
                                <div class="theme-name">Fresh Green</div>
                            </div>

                            <div class="theme-option" data-theme="orange-gradient" onclick="selectAppearanceTheme(this)">
                                <div class="theme-preview" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                                    <div class="theme-preview-content">
                                        <div class="theme-preview-avatar"></div>
                                        <div class="theme-preview-lines"></div>
                                        <div class="theme-preview-lines"></div>
                                    </div>
                                </div>
                                <div class="theme-name">Pink Sunset</div>
                            </div>

                            <div class="theme-option" data-theme="dark" onclick="selectAppearanceTheme(this)">
                                <div class="theme-preview" style="background: linear-gradient(135deg, #232526 0%, #414345 100%);">
                                    <div class="theme-preview-content">
                                        <div class="theme-preview-avatar"></div>
                                        <div class="theme-preview-lines"></div>
                                        <div class="theme-preview-lines"></div>
                                    </div>
                                </div>
                                <div class="theme-name">Dark Mode</div>
                            </div>

                            <div class="theme-option" data-theme="light" onclick="selectAppearanceTheme(this)">
                                <div class="theme-preview" style="background: #f8fafc; border: 1px solid #e2e8f0;">
                                    <div class="theme-preview-content" style="background: rgba(0,0,0,0.05);">
                                        <div class="theme-preview-avatar" style="background: rgba(0,0,0,0.2);"></div>
                                        <div class="theme-preview-lines" style="background: rgba(0,0,0,0.1);"></div>
                                        <div class="theme-preview-lines" style="background: rgba(0,0,0,0.1);"></div>
                                    </div>
                                </div>
                                <div class="theme-name">Light Mode</div>
                            </div>
                        </div>
                    </div>

                    <div class="appearance-block">
                        <div class="appearance-split">
                            <div>
                                <h3 class="block-title">Colors</h3>
                                <div class="color-panel">
                                    <div class="color-panel-header">
                                        <span>Button Color</span>
                                        <div class="custom-color-input compact">
                                            <input type="color" id="customColor" value="#6366f1" onchange="setAppearanceCustomColor(this.value)">
                                            <input type="text" id="customColorHex" placeholder="#6366f1" value="#6366f1" onchange="setAppearanceCustomColor(this.value)">
                                        </div>
                                    </div>
                                    <div class="color-options" id="buttonColorOptions">
                                        <div class="color-option selected" style="background: #6366f1;" data-color="#6366f1" onclick="selectAppearanceColor(this)"></div>
                                        <div class="color-option" style="background: #4f46e5;" data-color="#4f46e5" onclick="selectAppearanceColor(this)"></div>
                                        <div class="color-option" style="background: #8b5cf6;" data-color="#8b5cf6" onclick="selectAppearanceColor(this)"></div>
                                        <div class="color-option" style="background: #ec4899;" data-color="#ec4899" onclick="selectAppearanceColor(this)"></div>
                                        <div class="color-option" style="background: #f97316;" data-color="#f97316" onclick="selectAppearanceColor(this)"></div>
                                        <div class="color-option" style="background: #eab308;" data-color="#eab308" onclick="selectAppearanceColor(this)"></div>
                                        <div class="color-option" style="background: #22c55e;" data-color="#22c55e" onclick="selectAppearanceColor(this)"></div>
                                        <div class="color-option" style="background: #14b8a6;" data-color="#14b8a6" onclick="selectAppearanceColor(this)"></div>
                                        <div class="color-option" style="background: #06b6d4;" data-color="#06b6d4" onclick="selectAppearanceColor(this)"></div>
                                        <div class="color-option" style="background: #3b82f6;" data-color="#3b82f6" onclick="selectAppearanceColor(this)"></div>
                                        <div class="color-option" style="background: #ef4444;" data-color="#ef4444" onclick="selectAppearanceColor(this)"></div>
                                        <div class="color-option" style="background: #0f172a;" data-color="#0f172a" onclick="selectAppearanceColor(this)"></div>
                                        <div class="color-option" style="background: #ffffff; border-color: #e2e8f0;" data-color="#ffffff" onclick="selectAppearanceColor(this)"></div>
                                        <div class="color-option" style="background: #94a3b8;" data-color="#94a3b8" onclick="selectAppearanceColor(this)"></div>
                                    </div>
                                </div>

                                <div class="color-panel">
                                    <div class="color-panel-header">
                                        <span>Font Color</span>
                                        <div class="custom-color-input compact">
                                            <input type="color" id="bioColor" value="#ffffff" onchange="setAppearanceBioColor(this.value)">
                                            <input type="text" id="bioColorHex" placeholder="#ffffff" value="#ffffff" onchange="setAppearanceBioColor(this.value)">
                                        </div>
                                    </div>
                                    <div class="color-options compact" id="bioColorOptions">
                                        <div class="color-option selected" style="background: #6366f1;" data-color="#6366f1" onclick="selectAppearanceBioColor(this)"></div>
                                        <div class="color-option" style="background: #4f46e5;" data-color="#4f46e5" onclick="selectAppearanceBioColor(this)"></div>
                                        <div class="color-option" style="background: #8b5cf6;" data-color="#8b5cf6" onclick="selectAppearanceBioColor(this)"></div>
                                        <div class="color-option" style="background: #ec4899;" data-color="#ec4899" onclick="selectAppearanceBioColor(this)"></div>
                                        <div class="color-option" style="background: #f97316;" data-color="#f97316" onclick="selectAppearanceBioColor(this)"></div>
                                        <div class="color-option" style="background: #eab308;" data-color="#eab308" onclick="selectAppearanceBioColor(this)"></div>
                                        <div class="color-option" style="background: #22c55e;" data-color="#22c55e" onclick="selectAppearanceBioColor(this)"></div>
                                        <div class="color-option" style="background: #14b8a6;" data-color="#14b8a6" onclick="selectAppearanceBioColor(this)"></div>
                                        <div class="color-option" style="background: #06b6d4;" data-color="#06b6d4" onclick="selectAppearanceBioColor(this)"></div>
                                        <div class="color-option" style="background: #3b82f6;" data-color="#3b82f6" onclick="selectAppearanceBioColor(this)"></div>
                                        <div class="color-option" style="background: #ef4444;" data-color="#ef4444" onclick="selectAppearanceBioColor(this)"></div>
                                        <div class="color-option" style="background: #0f172a;" data-color="#0f172a" onclick="selectAppearanceBioColor(this)"></div>
                                        <div class="color-option" style="background: #ffffff; border-color: #e2e8f0;" data-color="#ffffff" onclick="selectAppearanceBioColor(this)"></div>
                                        <div class="color-option" style="background: #94a3b8;" data-color="#94a3b8" onclick="selectAppearanceBioColor(this)"></div>
                                    </div>
                                </div>
                            </div>
                            <div>
                                <h3 class="block-title">Buttons</h3>
                                <div class="button-style-grid">
                                    <div class="button-style-option selected" data-style="rounded" onclick="selectAppearanceButtonStyle(this)">
                                        <div class="button-style-preview rounded">
                                            <span></span>
                                        </div>
                                        <div class="button-style-name">Rounded</div>
                                    </div>
                                    <div class="button-style-option" data-style="pill" onclick="selectAppearanceButtonStyle(this)">
                                        <div class="button-style-preview pill">
                                            <span></span>
                                        </div>
                                        <div class="button-style-name">Pill</div>
                                    </div>
                                    <div class="button-style-option" data-style="square" onclick="selectAppearanceButtonStyle(this)">
                                        <div class="button-style-preview square">
                                            <span></span>
                                        </div>
                                        <div class="button-style-name">Square</div>
                                    </div>
                                </div>


                                <div style="margin-top: 1rem;">
                                    <h3 class="block-title">Card Shape</h3>
                                    <div class="card-shape-grid">
                                        <div class="card-shape-option" data-shape="ticket" onclick="selectCardShape(this)">
                                            <div class="card-shape-preview ticket">
                                                <span></span>
                                            </div>
                                            <div class="card-shape-name">Ticket</div>
                                        </div>
                                        <div class="card-shape-option selected" data-shape="rounded" onclick="selectCardShape(this)">
                                            <div class="card-shape-preview rounded">
                                                <span></span>
                                            </div>
                                            <div class="card-shape-name">Rounded</div>
                                        </div>
                                        <div class="card-shape-option" data-shape="square" onclick="selectCardShape(this)">
                                            <div class="card-shape-preview square">
                                                <span></span>
                                            </div>
                                            <div class="card-shape-name">Square</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>

            <!-- Profile Settings -->
            <div class="dashboard-card is-collapsed" id="profileSettingsSection" data-accordion>
                <div class="card-header">
                    <div>
                        <h2 class="card-title">Profile Settings</h2>
                        <p style="font-size: 0.8125rem; color: var(--text-muted); margin-top: 0.25rem;">Update your identity and bio</p>
                    </div>
                    <button class="btn-primary btn-header-action" onclick="saveProfileSettings()">
                        <span>Save Profile</span>
                        <span>+</span>
                    </button>
                </div>
                <div class="card-body accordion-body">
                    <div class="profile-upload">
                        <div class="profile-avatar-preview">
                            <img id="avatarPreview" src="https://api.dicebear.com/7.x/avataaars/svg?seed=creative" alt="Profile">
                        </div>
                        <div class="profile-upload-actions">
                            <button class="btn-upload" onclick="document.getElementById('avatarInput').click()">
                                📷 Upload Photo
                            </button>
                            <button class="btn-remove" onclick="removeAvatar()">
                                🗑️ Remove
                            </button>
                            <input type="file" id="avatarInput" accept="image/*" style="display: none;" onchange="handleAvatarUpload(event)">
                        </div>
                        <div class="profile-social-inline">
                            <div class="profile-social-title">Social Links</div>
                            <div class="social-icon-row" id="socialLinksRow"></div>
                        </div>
                    </div>

                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label style="display: block; font-size: 0.875rem; font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem;">
                            Display Name
                        </label>
                        <input type="text" id="displayName" class="form-input" value="Creative Studio" style="width: 100%; padding: 0.75rem 1rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); font-size: 0.9375rem;" onchange="updateProfilePreview()">
                    </div>

                    <div class="form-group" style="margin-bottom: 1.5rem;">
                        <label style="display: block; font-size: 0.875rem; font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem;">
                            Username
                        </label>
                        <div class="username-input-group">
                            <span class="username-prefix">wemint.app/@</span>
                            <input type="text" id="username" value="creativestudio" onchange="updateUsername()">
                        </div>
                        <p class="url-preview">
                            Your page URL: <a href="#" id="urlPreview">wemint.app/@creativestudio</a>
                        </p>
                    </div>

                    <div class="form-group">
                        <label style="display: block; font-size: 0.875rem; font-weight: 600; color: var(--text-primary); margin-bottom: 0.5rem;">
                            Bio
                        </label>
                        <textarea id="bio" class="bio-textarea" maxlength="160" oninput="updateCharCount()" onchange="updateProfilePreview()">Digital creator & designer. Sharing templates, presets, and design resources.</textarea>
                        <p class="char-count"><span id="charCount">80</span>/160</p>
                    </div>

                    <p style="font-size: 0.875rem; color: var(--text-secondary); margin-top: 1rem;">
                        Add social icons that appear on your bio page
                    </p>
                </div>
            </div>

            <!-- Quick Links Section -->
            <div class="dashboard-card" id="quickLinksSection" data-accordion>
                <div class="card-header">
                    <div>
                        <h2 class="card-title">Your Links</h2>
                        <p style="font-size: 0.8125rem; color: var(--text-muted); margin-top: 0.25rem;">Add links that show on your bio page</p>
                    </div>
                    <div style="display: flex; gap: 0.75rem; align-items: center;">
                        <label class="section-visibility-toggle">
                            <span class="toggle-label">Show</span>
                            <span class="toggle-switch">
                                <input type="checkbox" id="toggleLinks" onchange="toggleSectionVisibility('links', this)">
                                <span class="toggle-slider"></span>
                            </span>
                        </label>
                        <button class="btn-primary btn-header-action" onclick="openAddLinkModal()">
                            <span>Add Link</span>
                            <span>+</span>
                        </button>
                    </div>
                </div>
                <div class="card-body accordion-body" style="padding: 0;">
                    <table class="products-table" id="linksTable">
                        <thead>
                            <tr>
                                <th>Link</th>
                                <th>URL</th>
                                <th>Clicks</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="linksTableBody"></tbody>
                    </table>
                </div>
            </div>

            <!-- Affiliate Links Section -->
            <div class="dashboard-card is-collapsed" id="affiliateLinksSection" data-accordion>
                <div class="card-header">
                    <div>
                        <h2 class="card-title">Your Affiliate Links</h2>
                    </div>
                    <div style="display: flex; gap: 0.75rem; align-items: center;">
                        <label class="section-visibility-toggle">
                            <span class="toggle-label">Show</span>
                            <span class="toggle-switch">
                                <input type="checkbox" id="toggleAffiliate" onchange="toggleSectionVisibility('affiliate', this)">
                                <span class="toggle-slider"></span>
                            </span>
                        </label>
                        <button class="btn-primary btn-header-action" onclick="openAddAffiliateModal()">
                            <span>Add Affiliate Link</span>
                            <span>+</span>
                        </button>
                    </div>
                </div>
                <div class="card-body accordion-body" style="padding: 0;">
                    <table class="products-table">
                        <thead>
                            <tr>
                                <th>Product</th>
                                <th>Review</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="affiliateLinksTable">
                            <tr>
                                <td>
                                    <div class="product-cell">
                                        <img src="https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=100&h=100&fit=crop" alt="Product" class="product-thumb">
                                        <span class="product-name">Sony WH-1000XM5</span>
                                    </div>
                                </td>
                                <td style="max-width: 200px;">
                                    <p style="font-size: 0.8125rem; color: var(--text-secondary); overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">หูฟังตัดเสียงที่ดีที่สุด เสียงดี แบตอึด ใส่สบาย 🔥</p>
                                </td>
                                <td><span class="status-badge active">Active</span></td>
                                <td>
                                    <div class="table-actions">
                                        <button class="btn-icon" onclick="editAffiliate(1)" title="Edit">✏️</button>
                                        <button class="btn-icon" onclick="copyAffiliateLink(1)" title="Copy Link">📋</button>
                                        <button class="btn-icon" onclick="deleteAffiliate(1)" title="Delete">🗑️</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="product-cell">
                                        <img src="https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=100&h=100&fit=crop" alt="Product" class="product-thumb">
                                        <span class="product-name">Apple Watch Ultra 2</span>
                                    </div>
                                </td>
                                <td style="max-width: 200px;">
                                    <p style="font-size: 0.8125rem; color: var(--text-secondary); overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">สมาร์ทวอทช์สำหรับคนรักสุขภาพ แบตอยู่ได้หลายวัน 💪</p>
                                </td>
                                <td><span class="status-badge active">Active</span></td>
                                <td>
                                    <div class="table-actions">
                                        <button class="btn-icon" onclick="editAffiliate(2)" title="Edit">✏️</button>
                                        <button class="btn-icon" onclick="copyAffiliateLink(2)" title="Copy Link">📋</button>
                                        <button class="btn-icon" onclick="deleteAffiliate(2)" title="Delete">🗑️</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="product-cell">
                                        <img src="https://images.unsplash.com/photo-1585386959984-a4155224a1ad?w=100&h=100&fit=crop" alt="Product" class="product-thumb">
                                        <span class="product-name">Kindle Paperwhite</span>
                                    </div>
                                </td>
                                <td style="max-width: 200px;">
                                    <p style="font-size: 0.8125rem; color: var(--text-secondary); overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">อ่านหนังสือไม่เจ็บตา จอ e-ink ชัดมาก 📚</p>
                                </td>
                                <td><span class="status-badge active">Active</span></td>
                                <td>
                                    <div class="table-actions">
                                        <button class="btn-icon" onclick="editAffiliate(3)" title="Edit">✏️</button>
                                        <button class="btn-icon" onclick="copyAffiliateLink(3)" title="Copy Link">📋</button>
                                        <button class="btn-icon" onclick="deleteAffiliate(3)" title="Delete">🗑️</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="product-cell">
                                        <img src="https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?w=100&h=100&fit=crop" alt="Product" class="product-thumb">
                                        <span class="product-name">Nike Air Max 90</span>
                                    </div>
                                </td>
                                <td style="max-width: 200px;">
                                    <p style="font-size: 0.8125rem; color: var(--text-secondary); overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">รองเท้าสวยใส่สบาย ไม่ต้องพอกหน้า 👟</p>
                                </td>
                                <td><span class="status-badge draft">Draft</span></td>
                                <td>
                                    <div class="table-actions">
                                        <button class="btn-icon" onclick="editAffiliate(4)" title="Edit">✏️</button>
                                        <button class="btn-icon" onclick="copyAffiliateLink(4)" title="Copy Link">📋</button>
                                        <button class="btn-icon" onclick="deleteAffiliate(4)" title="Delete">🗑️</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Products Table -->
            <div class="dashboard-card is-collapsed" data-accordion>
                <div class="card-header">
                    <h2 class="card-title">Your Shop</h2>
                    <div style="display: flex; gap: 0.75rem; align-items: center;">
                        <label class="section-visibility-toggle">
                            <span class="toggle-label">Show</span>
                            <span class="toggle-switch">
                                <input type="checkbox" id="toggleProducts" onchange="toggleSectionVisibility('products', this)">
                                <span class="toggle-slider"></span>
                            </span>
                        </label>
                        <button class="btn-primary btn-header-action" onclick="openAddProductModal()">
                            <span>Add Product</span>
                            <span>+</span>
                        </button>
                    </div>
                </div>
                <div class="card-body accordion-body" style="padding: 0;">
                    <table class="products-table" id="productsTable">
                        <thead>
                            <tr>
                                <th>Product</th>
                                <th>Price</th>
                                <th>Sales</th>
                                <th>Revenue</th>
                                <th>Status</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>
                                    <div class="product-cell">
                                        <img src="https://images.unsplash.com/photo-1561070791-2526d30994b5?w=100&h=100&fit=crop" alt="Product" class="product-thumb">
                                        <span class="product-name">Instagram Templates Pack</span>
                                    </div>
                                </td>
                                <td>$19</td>
                                <td>68</td>
                                <td>$1,292</td>
                                <td><span class="status-badge active">Active</span></td>
                                <td>
                                    <div class="table-actions">
                                        <button class="btn-icon" onclick="editProduct(1)" title="Edit">✏️</button>
                                        <button class="btn-icon" onclick="viewProductStats(1)" title="Stats">📊</button>
                                        <button class="btn-icon" onclick="deleteProduct(1)" title="Delete">🗑️</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="product-cell">
                                        <img src="https://images.unsplash.com/photo-1611532736597-de2d4265fba3?w=100&h=100&fit=crop" alt="Product" class="product-thumb">
                                        <span class="product-name">Lightroom Presets Bundle</span>
                                    </div>
                                </td>
                                <td>$29</td>
                                <td>42</td>
                                <td>$1,218</td>
                                <td><span class="status-badge active">Active</span></td>
                                <td>
                                    <div class="table-actions">
                                        <button class="btn-icon" onclick="editProduct(2)" title="Edit">✏️</button>
                                        <button class="btn-icon" onclick="viewProductStats(2)" title="Stats">📊</button>
                                        <button class="btn-icon" onclick="deleteProduct(2)" title="Delete">🗑️</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="product-cell">
                                        <img src="https://images.unsplash.com/photo-1586717791821-3f44a563fa4c?w=100&h=100&fit=crop" alt="Product" class="product-thumb">
                                        <span class="product-name">3D Icon Pack</span>
                                    </div>
                                </td>
                                <td>$39</td>
                                <td>12</td>
                                <td>$468</td>
                                <td><span class="status-badge active">Active</span></td>
                                <td>
                                    <div class="table-actions">
                                        <button class="btn-icon" onclick="editProduct(3)" title="Edit">✏️</button>
                                        <button class="btn-icon" onclick="viewProductStats(3)" title="Stats">📊</button>
                                        <button class="btn-icon" onclick="deleteProduct(3)" title="Delete">🗑️</button>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <div class="product-cell">
                                        <img src="https://images.unsplash.com/photo-1432888498266-38ffec3eaf0a?w=100&h=100&fit=crop" alt="Product" class="product-thumb">
                                        <span class="product-name">Social Media Growth Guide</span>
                                    </div>
                                </td>
                                <td>$15</td>
                                <td>20</td>
                                <td>$300</td>
                                <td><span class="status-badge draft">Draft</span></td>
                                <td>
                                    <div class="table-actions">
                                        <button class="btn-icon" onclick="editProduct(4)" title="Edit">✏️</button>
                                        <button class="btn-icon" onclick="viewProductStats(4)" title="Stats">📊</button>
                                        <button class="btn-icon" onclick="deleteProduct(4)" title="Delete">🗑️</button>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            </div>

            <!-- Right Column - Your Page Preview -->
            <div class="preview-section">
                <div class="preview-header">
                    <div class="preview-title">
                        <span>Your Page</span>
                    </div>
                    <a href="index.html" target="_blank" class="preview-link">
                        <span>Open</span>
                        <span>↗</span>
                    </a>
                </div>

                <div class="preview-card">
                    <!-- Browser URL Bar -->
                    <div class="preview-url-bar">
                        <div class="url-dots">
                            <span class="url-dot red"></span>
                            <span class="url-dot yellow"></span>
                            <span class="url-dot green"></span>
                        </div>
                        <div class="url-input">wemint.app/@creativestudio</div>
                    </div>

                    <!-- Phone Mockup -->
                    <div class="phone-preview-container">
                        <div class="phone-mockup">
                            <div class="phone-inner" id="previewBackground">
                                <div class="phone-notch"></div>
                                <iframe src="index.html" class="phone-iframe" id="previewIframe"></iframe>
                            </div>
                        </div>
                    </div>

                    <!-- Preview Actions -->
                    <div class="preview-actions">
                        <button class="btn-copy-link" onclick="copyBioLink()">
                            📋 Copy Link
                        </button>
                        <button class="btn-share" onclick="shareLink()">
                            📤 Share
                        </button>
                    </div>
                </div>

                <!-- Key Stats under preview -->
                <div class="stats-grid" style="margin-top: 1rem;">
                    <div class="stat-card">
                        <div class="stat-card-header">
                            <span class="material-symbols-outlined stat-icon">toll</span>
                            <p class="stat-label">Total Mint</p>
                        </div>
                        <p class="stat-value">$2,847</p>
                        <p class="stat-change">↑ 12% from last month</p>
                    </div>
                    <div class="stat-card">
                        <div class="stat-card-header">
                            <span class="material-symbols-outlined stat-icon">visibility</span>
                            <p class="stat-label">Page Views</p>
                        </div>
                        <p class="stat-value">3,521</p>
                        <p class="stat-change">↑ 24% from last month</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Product Modal -->
    <div id="addProductModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <button class="modal-close" onclick="closeAddProductModal()">&times;</button>

            <div class="modal-body">
                <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1.5rem;">Add New Product</h2>

                <form onsubmit="handleAddProduct(event)">
                    <div class="form-group">
                        <label>Product Type</label>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 0.75rem; margin-top: 0.5rem;">
                            <label class="payment-option selected" style="padding: 1rem;">
                                <input type="radio" name="productType" value="digital" checked>
                                <span style="font-size: 1.5rem;">📦</span>
                                <span>Digital Download</span>
                            </label>
                            <label class="payment-option" style="padding: 1rem;">
                                <input type="radio" name="productType" value="course">
                                <span style="font-size: 1.5rem;">🎓</span>
                                <span>Course</span>
                            </label>
                            <label class="payment-option" style="padding: 1rem;">
                                <input type="radio" name="productType" value="membership">
                                <span style="font-size: 1.5rem;">⭐</span>
                                <span>Membership</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Product Name</label>
                        <input type="text" placeholder="e.g., Instagram Templates Pack" required>
                    </div>

                    <div class="form-group">
                        <label>Description</label>
                        <textarea placeholder="Describe your product..." rows="3" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); font-family: inherit; resize: vertical;"></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Price (USD)</label>
                            <input type="number" placeholder="19" min="0" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label>Compare at Price</label>
                            <input type="number" placeholder="29" min="0" step="0.01">
                            <p class="form-hint">Optional - shows as strikethrough</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Product Image</label>
                        <div style="border: 2px dashed var(--border-color); border-radius: var(--radius-md); padding: 2rem; text-align: center; cursor: pointer;" onclick="document.getElementById('productImageInput').click()">
                            <p style="color: var(--text-muted);">📷 Click to upload or drag & drop</p>
                            <p style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem;">PNG, JPG up to 10MB</p>
                            <input type="file" id="productImageInput" accept="image/*" style="display: none;">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Product File</label>
                        <div style="border: 2px dashed var(--border-color); border-radius: var(--radius-md); padding: 2rem; text-align: center; cursor: pointer;" onclick="document.getElementById('productFileInput').click()">
                            <p style="color: var(--text-muted);">📁 Click to upload your digital product</p>
                            <p style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem;">ZIP, PDF, or any file up to 500MB</p>
                            <input type="file" id="productFileInput" style="display: none;">
                        </div>
                    </div>

                    <div style="display: flex; gap: 0.75rem; margin-top: 1.5rem;">
                        <button type="button" class="btn-secondary" style="flex: 1;" onclick="closeAddProductModal()">Cancel</button>
                        <button type="submit" class="btn-primary" style="flex: 1;">Create Product</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Payment Modal -->
    <div id="paymentModal" class="modal">
        <div class="modal-content" style="max-width: 520px;">
            <button class="modal-close" onclick="closePaymentModal()">&times;</button>

            <div class="modal-body">
                <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 0.5rem;">Add Payment Details</h2>
                <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">wemint does not hold funds — customers pay you directly.</p>

                <form onsubmit="handlePaymentSave(event)">
                    <div class="form-group">
                        <label>Payment Method</label>
                        <div class="payment-methods" style="flex-direction: column;">
                            <label class="payment-option selected">
                                <input type="radio" name="paymentMethod" value="bank" checked>
                                <span>🏦 Bank Details</span>
                            </label>
                            <label class="payment-option">
                                <input type="radio" name="paymentMethod" value="crypto">
                                <span>₿ Crypto Wallet</span>
                            </label>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Account / Wallet Name</label>
                        <input type="text" id="paymentName" placeholder="e.g., Creative Studio" required>
                    </div>

                    <div class="form-group">
                        <label>Bank Account / Wallet Address</label>
                        <input type="text" id="paymentDetails" placeholder="e.g., Bank account or wallet address" required>
                        <p class="form-hint">This will be shown on your bio page checkout.</p>
                    </div>

                    <div style="display: flex; gap: 0.75rem; margin-top: 1.5rem;">
                        <button type="button" class="btn-secondary" style="flex: 1;" onclick="closePaymentModal()">Cancel</button>
                        <button type="submit" class="btn-primary" style="flex: 1;">Save Payment Details</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Product Modal -->
    <div id="editProductModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <button class="modal-close" onclick="closeEditProductModal()">&times;</button>

            <div class="modal-body">
                <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1.5rem;">✏️ Edit Product</h2>

                <form onsubmit="saveEditedProduct(event)">
                    <!-- Image Preview -->
                    <div style="margin-bottom: 1.5rem; text-align: center;">
                        <img id="editProductImagePreview" src="" alt="Product" style="width: 200px; height: 150px; object-fit: cover; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
                    </div>

                    <div class="form-group">
                        <label>Product Name</label>
                        <input type="text" id="editProductTitle" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                    </div>

                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="editProductDescription" rows="3" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); font-family: inherit; resize: vertical;"></textarea>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label>Price (USD)</label>
                            <input type="number" id="editProductPrice" min="0" step="0.01" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                        </div>
                        <div class="form-group">
                            <label>Status</label>
                            <select id="editProductStatus" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                                <option value="active">Active</option>
                                <option value="draft">Draft</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Image URL</label>
                        <input type="url" id="editProductImage" placeholder="https://..." style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);" onchange="document.getElementById('editProductImagePreview').src = this.value">
                    </div>

                    <div class="form-group">
                        <label>Badge (optional)</label>
                        <select id="editProductBadge" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                            <option value="">No Badge</option>
                            <option value="Best Seller">Best Seller</option>
                            <option value="New">New</option>
                            <option value="Sale">Sale</option>
                            <option value="Popular">Popular</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Features (one per line)</label>
                        <textarea id="editProductFeatures" rows="4" placeholder="Feature 1&#10;Feature 2&#10;Feature 3" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); font-family: inherit; resize: vertical;"></textarea>
                    </div>

                    <div style="display: flex; gap: 0.75rem; margin-top: 1.5rem;">
                        <button type="button" class="btn-secondary" style="flex: 1;" onclick="closeEditProductModal()">Cancel</button>
                        <button type="submit" class="btn-primary" style="flex: 1;">💾 Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Quick Link Modal -->
    <div id="addLinkModal" class="modal">
        <div class="modal-content" style="max-width: 520px;">
            <button class="modal-close" onclick="closeAddLinkModal()">&times;</button>

            <div class="modal-body">
                <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1.5rem;">🔗 Add Quick Link</h2>

                <form onsubmit="handleAddLink(event)">
                    <div class="form-group">
                        <label>Title</label>
                        <input type="text" id="linkTitle" placeholder="e.g., Watch my latest YouTube video" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                    </div>

                    <div class="form-group">
                        <label>URL</label>
                        <input type="url" id="linkUrl" placeholder="https://..." required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                    </div>

                    <div class="form-row">
                        <div class="form-group" style="flex: 1;">
                            <label>Icon (emoji)</label>
                            <input type="text" id="linkIcon" placeholder="🔗" maxlength="2" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label>Status</label>
                            <select id="linkStatus" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                                <option value="active">Active</option>
                                <option value="draft">Draft</option>
                            </select>
                        </div>
                    </div>

                    <div style="display: flex; gap: 0.75rem; margin-top: 1.5rem;">
                        <button type="button" class="btn-secondary" style="flex: 1;" onclick="closeAddLinkModal()">Cancel</button>
                        <button type="submit" class="btn-primary" style="flex: 1;">➕ Add Link</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Quick Link Modal -->
    <div id="editLinkModal" class="modal">
        <div class="modal-content" style="max-width: 520px;">
            <button class="modal-close" onclick="closeEditLinkModal()">&times;</button>

            <div class="modal-body">
                <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1.5rem;">✏️ Edit Quick Link</h2>

                <form onsubmit="saveEditedLink(event)">
                    <div class="form-group">
                        <label>Title</label>
                        <input type="text" id="editLinkTitle" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                    </div>

                    <div class="form-group">
                        <label>URL</label>
                        <input type="url" id="editLinkUrl" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                    </div>

                    <div class="form-row">
                        <div class="form-group" style="flex: 1;">
                            <label>Icon (emoji)</label>
                            <input type="text" id="editLinkIcon" maxlength="2" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label>Status</label>
                            <select id="editLinkStatus" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                                <option value="active">Active</option>
                                <option value="draft">Draft</option>
                            </select>
                        </div>
                    </div>

                    <div style="display: flex; gap: 0.75rem; margin-top: 1.5rem;">
                        <button type="button" class="btn-secondary" style="flex: 1;" onclick="closeEditLinkModal()">Cancel</button>
                        <button type="submit" class="btn-primary" style="flex: 1;">💾 Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Add Affiliate Link Modal -->
    <div id="addAffiliateModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <button class="modal-close" onclick="closeAddAffiliateModal()">&times;</button>

            <div class="modal-body">
                <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1.5rem;">🛒 Add Affiliate Link</h2>

                <form onsubmit="handleAddAffiliate(event)">
                    <div class="form-group">
                        <label>Product Name</label>
                        <input type="text" id="affiliateProductName" placeholder="e.g., Sony WH-1000XM5" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                    </div>

                    <div class="form-group">
                        <label>Affiliate Link URL</label>
                        <input type="url" id="affiliateUrl" placeholder="https://affiliate.example.com/your-link" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                        <p class="form-hint">Paste your affiliate link from Amazon, Shopee, Lazada, etc.</p>
                    </div>

                    <div class="form-group">
                        <label>Short Review (รีวิวสั้นๆ)</label>
                        <textarea id="affiliateReview" placeholder="เขียนรีวิวสั้นๆ ว่าทำไมชอบสินค้านี้..." rows="3" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); font-family: inherit; resize: vertical;"></textarea>
                        <p class="form-hint">ใส่ emoji ได้เลย! เช่น 🔥 💪 ⭐</p>
                    </div>

                    <div class="form-group">
                        <label>Product Image</label>
                        <div style="border: 2px dashed var(--border-color); border-radius: var(--radius-md); padding: 2rem; text-align: center; cursor: pointer;" onclick="document.getElementById('affiliateImageInput').click()">
                            <div id="affiliateImagePreview" style="display: none; margin-bottom: 1rem;">
                                <img id="affiliateImagePreviewImg" src="" style="max-width: 150px; max-height: 150px; border-radius: var(--radius-md);">
                            </div>
                            <p style="color: var(--text-muted);">📷 Click to upload product image</p>
                            <p style="font-size: 0.75rem; color: var(--text-muted); margin-top: 0.5rem;">PNG, JPG up to 5MB</p>
                            <input type="file" id="affiliateImageInput" accept="image/*" style="display: none;" onchange="previewAffiliateImage(this)">
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Or paste Image URL</label>
                        <input type="url" id="affiliateImageUrl" placeholder="https://images.example.com/product.jpg" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                    </div>

                    <div class="form-group">
                        <label>Platform</label>
                        <select id="affiliatePlatform" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                            <option value="amazon">🛒 Amazon</option>
                            <option value="shopee">🧡 Shopee</option>
                            <option value="lazada">💜 Lazada</option>
                            <option value="aliexpress">🔴 AliExpress</option>
                            <option value="other">🔗 Other</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Status</label>
                        <div class="payment-methods" style="flex-direction: row; gap: 1rem;">
                            <label class="payment-option selected" style="flex: 1;">
                                <input type="radio" name="affiliateStatus" value="active" checked>
                                <span>✅ Active</span>
                            </label>
                            <label class="payment-option" style="flex: 1;">
                                <input type="radio" name="affiliateStatus" value="draft">
                                <span>📝 Draft</span>
                            </label>
                        </div>
                    </div>

                    <div style="display: flex; gap: 0.75rem; margin-top: 1.5rem;">
                        <button type="button" class="btn-secondary" style="flex: 1;" onclick="closeAddAffiliateModal()">Cancel</button>
                        <button type="submit" class="btn-primary" style="flex: 1;">➕ Add Affiliate Link</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Affiliate Link Modal -->
    <div id="editAffiliateModal" class="modal">
        <div class="modal-content" style="max-width: 600px;">
            <button class="modal-close" onclick="closeEditAffiliateModal()">&times;</button>

            <div class="modal-body">
                <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1.5rem;">✏️ Edit Affiliate Link</h2>

                <form onsubmit="saveEditedAffiliate(event)">
                    <div style="margin-bottom: 1.5rem; text-align: center;">
                        <img id="editAffiliateImagePreview" src="" alt="Product" style="width: 150px; height: 150px; object-fit: cover; border-radius: var(--radius-md); border: 1px solid var(--border-color);">
                    </div>

                    <div class="form-group">
                        <label>Product Name</label>
                        <input type="text" id="editAffiliateProductName" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                    </div>

                    <div class="form-group">
                        <label>Affiliate Link URL</label>
                        <input type="url" id="editAffiliateUrl" required style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                    </div>

                    <div class="form-group">
                        <label>Short Review</label>
                        <textarea id="editAffiliateReview" rows="3" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md); font-family: inherit; resize: vertical;"></textarea>
                    </div>

                    <div class="form-group">
                        <label>Image URL</label>
                        <input type="url" id="editAffiliateImageUrl" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);" onchange="document.getElementById('editAffiliateImagePreview').src = this.value">
                    </div>

                    <div class="form-group">
                        <label>Status</label>
                        <select id="editAffiliateStatus" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                            <option value="active">Active</option>
                            <option value="draft">Draft</option>
                        </select>
                    </div>

                    <div style="display: flex; gap: 0.75rem; margin-top: 1.5rem;">
                        <button type="button" class="btn-secondary" style="flex: 1;" onclick="closeEditAffiliateModal()">Cancel</button>
                        <button type="submit" class="btn-primary" style="flex: 1;">💾 Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Social Link Modal -->
    <div id="socialLinkModal" class="modal">
        <div class="modal-content" style="max-width: 520px;">
            <button class="modal-close" onclick="closeSocialLinkModal()">&times;</button>

            <div class="modal-body">
                <h2 style="font-size: 1.25rem; font-weight: 700; margin-bottom: 1.5rem;">Add Social Icon</h2>

                <form onsubmit="saveSocialLink(event)">
                    <div class="form-group">
                        <label>Platform</label>
                        <select id="socialPlatformSelect" onchange="handleSocialPlatformChange(this.value)" style="width: 100%; padding: 0.75rem; border: 1px solid var(--border-color); border-radius: var(--radius-md);">
                            <option value="instagram">Instagram</option>
                            <option value="tiktok">TikTok</option>
                            <option value="youtube">YouTube</option>
                            <option value="twitter">X (Twitter)</option>
                            <option value="facebook">Facebook</option>
                            <option value="linkedin">LinkedIn</option>
                            <option value="website">Website</option>
                            <option value="email">Email</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Link URL</label>
                        <input type="text" id="socialUrlInput" placeholder="https://..." required>
                        <p class="form-hint">Use a full URL (or email for Email).</p>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-field">
                            <input type="checkbox" id="socialEnabledToggle" checked>
                            <span>Show on bio page</span>
                        </label>
                    </div>

                    <div style="display: flex; gap: 0.75rem; margin-top: 1.5rem;">
                        <button type="button" class="btn-secondary" style="flex: 1;" onclick="closeSocialLinkModal()">Cancel</button>
                        <button type="submit" class="btn-primary" style="flex: 1;">Save Social Link</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // ========================================
        // Appearance Settings
        // ========================================

        const defaultAppearanceSettings = {
            theme: 'purple-gradient',
            primaryColor: '#22c55e',
            buttonStyle: 'rounded',
            font: 'Google Sans',
            bioColor: '#ffffff',
            cardShape: 'ticket'
        };

        let appearanceSettings = { ...defaultAppearanceSettings };

        const appearanceThemeBackgrounds = {
            'purple-gradient': 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)',
            'blue-gradient': 'linear-gradient(135deg, #667eea 0%, #00d4ff 100%)',
            'green-gradient': 'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)',
            'orange-gradient': 'linear-gradient(135deg, #f093fb 0%, #f5576c 100%)',
            'dark': 'linear-gradient(135deg, #232526 0%, #414345 100%)',
            'light': '#f8fafc'
        };

        function loadAppearanceSettings() {
            const saved = localStorage.getItem('wemint_appearance');
            if (saved) {
                appearanceSettings = JSON.parse(saved);
            }
            appearanceSettings.font = 'Google Sans';
            applyAppearanceSettingsToUI();
        }

        function applyAppearanceSettingsToUI() {
            document.querySelectorAll('.theme-option').forEach(el => {
                el.classList.toggle('selected', el.dataset.theme === appearanceSettings.theme);
            });

            document.querySelectorAll('#buttonColorOptions .color-option').forEach(el => {
                el.classList.toggle('selected', el.dataset.color === appearanceSettings.primaryColor);
            });

            const colorInput = document.getElementById('customColor');
            const colorHex = document.getElementById('customColorHex');
            if (colorInput) colorInput.value = appearanceSettings.primaryColor;
            if (colorHex) colorHex.value = appearanceSettings.primaryColor;

            document.querySelectorAll('.button-style-option').forEach(el => {
                el.classList.toggle('selected', el.dataset.style === appearanceSettings.buttonStyle);
            });

            document.querySelectorAll('.font-option').forEach(el => {
                el.classList.toggle('selected', el.dataset.font === appearanceSettings.font);
            });

            document.querySelectorAll('.card-shape-option').forEach(el => {
                el.classList.toggle('selected', el.dataset.shape === appearanceSettings.cardShape);
            });

            document.querySelectorAll('#bioColorOptions .color-option').forEach(el => {
                el.classList.toggle('selected', el.dataset.color === appearanceSettings.bioColor);
            });

            const bioColorInput = document.getElementById('bioColor');
            const bioColorHex = document.getElementById('bioColorHex');
            if (bioColorInput) bioColorInput.value = appearanceSettings.bioColor;
            if (bioColorHex) bioColorHex.value = appearanceSettings.bioColor;

            updateAppearancePreview();
        }

        function selectAppearanceTheme(element) {
            document.querySelectorAll('.theme-option').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            appearanceSettings.theme = element.dataset.theme;
            updateAppearancePreview();
        }

        function selectAppearanceColor(element) {
            document.querySelectorAll('#buttonColorOptions .color-option').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            appearanceSettings.primaryColor = element.dataset.color;
            document.getElementById('customColor').value = element.dataset.color;
            document.getElementById('customColorHex').value = element.dataset.color;
            updateAppearancePreview();
        }

        function setAppearanceCustomColor(value) {
            if (value.match(/^#[0-9A-Fa-f]{6}$/)) {
                appearanceSettings.primaryColor = value;
                document.getElementById('customColor').value = value;
                document.getElementById('customColorHex').value = value;
                document.querySelectorAll('#buttonColorOptions .color-option').forEach(el => el.classList.remove('selected'));
                updateAppearancePreview();
            }
        }

        function selectAppearanceButtonStyle(element) {
            document.querySelectorAll('.button-style-option').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            appearanceSettings.buttonStyle = element.dataset.style;
            updateAppearancePreview();
        }

        function selectAppearanceFont(element) {
            document.querySelectorAll('.font-option').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            appearanceSettings.font = element.dataset.font;
            updateAppearancePreview();
        }

        function selectCardShape(element) {
            document.querySelectorAll('.card-shape-option').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            appearanceSettings.cardShape = element.dataset.shape;
            updateAppearancePreview();
        }

        function selectAppearanceBioColor(element) {
            document.querySelectorAll('#bioColorOptions .color-option').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            appearanceSettings.bioColor = element.dataset.color;
            document.getElementById('bioColor').value = appearanceSettings.bioColor;
            document.getElementById('bioColorHex').value = appearanceSettings.bioColor;
            updateAppearancePreview();
        }

        function setAppearanceBioColor(value) {
            if (value.match(/^#[0-9A-Fa-f]{6}$/)) {
                appearanceSettings.bioColor = value;
                document.getElementById('bioColor').value = value;
                document.getElementById('bioColorHex').value = value;
                document.querySelectorAll('#bioColorOptions .color-option').forEach(el => el.classList.remove('selected'));
                updateAppearancePreview();
            }
        }

        function updateAppearancePreview() {
            const previewBg = document.getElementById('previewBackground');
            if (previewBg) {
                previewBg.style.background = appearanceThemeBackgrounds[appearanceSettings.theme];
            }

            const iframe = document.getElementById('previewIframe');
            try {
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                iframeDoc.body.style.background = appearanceThemeBackgrounds[appearanceSettings.theme];
                iframeDoc.documentElement.style.setProperty('--theme-bg', appearanceThemeBackgrounds[appearanceSettings.theme]);
                iframeDoc.documentElement.style.setProperty('--primary', appearanceSettings.primaryColor);
                iframeDoc.documentElement.style.setProperty('--primary-dark', adjustColor(appearanceSettings.primaryColor, -20));
                iframeDoc.body.style.fontFamily = appearanceSettings.font + ', sans-serif';

                const nameEl = iframeDoc.querySelector('.profile-name');
                if (nameEl) {
                    nameEl.style.color = appearanceSettings.bioColor;
                }

                const handleEl = iframeDoc.querySelector('.profile-handle');
                if (handleEl) {
                    handleEl.style.color = appearanceSettings.bioColor;
                }

                const bioEl = iframeDoc.querySelector('.profile-bio');
                if (bioEl) {
                    bioEl.style.color = appearanceSettings.bioColor;
                }

                const buttons = iframeDoc.querySelectorAll('.btn-buy, .btn-checkout');
                buttons.forEach(btn => {
                    switch (appearanceSettings.buttonStyle) {
                        case 'pill':
                            btn.style.borderRadius = '9999px';
                            break;
                        case 'square':
                            btn.style.borderRadius = '0';
                            break;
                        default:
                            btn.style.borderRadius = '0.5rem';
                    }
                });

                // Apply card shape
                const bioContainer = iframeDoc.querySelector('.bio-container');
                const mintSection = iframeDoc.querySelector('.mint-section');

                if (bioContainer) {
                    bioContainer.classList.remove('card-shape-ticket', 'card-shape-rounded', 'card-shape-square');
                    bioContainer.classList.add('card-shape-' + appearanceSettings.cardShape);
                }

                if (mintSection) {
                    mintSection.classList.remove('card-shape-ticket', 'card-shape-rounded', 'card-shape-square');
                    mintSection.classList.add('card-shape-' + appearanceSettings.cardShape);
                }
            } catch (e) {
                console.log('Cannot access iframe content');
            }
        }

        function adjustColor(hex, percent) {
            const num = parseInt(hex.replace('#', ''), 16);
            const amt = Math.round(2.55 * percent);
            const R = (num >> 16) + amt;
            const G = (num >> 8 & 0x00FF) + amt;
            const B = (num & 0x0000FF) + amt;
            return '#' + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
        }

        function saveAppearanceSettings() {
            localStorage.setItem('wemint_appearance', JSON.stringify(appearanceSettings));

            const btn = event && event.target ? event.target : null;
            if (btn) {
                const originalText = btn.innerHTML;
                btn.innerHTML = '✅ Saved!';
                btn.style.background = 'var(--accent)';

                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.style.background = '';
                }, 2000);
            }

            const iframe = document.getElementById('previewIframe');
            if (iframe) {
                iframe.src = 'index.html';
            }
        }

        // ========================================
        // Profile & Social Settings
        // ========================================

        let profileSettings = {
            displayName: 'Creative Studio',
            username: 'creativestudio',
            bio: 'Digital creator & designer. Sharing templates, presets, and design resources.',
            avatar: 'https://api.dicebear.com/7.x/avataaars/svg?seed=creative',
            socials: {
                instagram: { enabled: true, url: 'https://instagram.com/creativestudio' },
                tiktok: { enabled: true, url: 'https://tiktok.com/@creativestudio' },
                youtube: { enabled: true, url: 'https://youtube.com/@creativestudio' },
                twitter: { enabled: false, url: '' },
                facebook: { enabled: false, url: '' },
                linkedin: { enabled: false, url: '' },
                website: { enabled: false, url: '' },
                email: { enabled: false, url: '' }
            }
        };

        function loadProfileSettings() {
            const saved = localStorage.getItem('wemint_profile');
            if (saved) {
                profileSettings = JSON.parse(saved);
            }
            applyProfileSettingsToUI();
            updateCharCount();
        }

        function applyProfileSettingsToUI() {
            document.getElementById('displayName').value = profileSettings.displayName;
            document.getElementById('username').value = profileSettings.username;
            document.getElementById('bio').value = profileSettings.bio;
            document.getElementById('avatarPreview').src = profileSettings.avatar;
            document.getElementById('urlPreview').textContent = `wemint.app/@${profileSettings.username}`;

            renderSocialLinksRow();
            updateProfilePreview();
        }

        function handleAvatarUpload(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    profileSettings.avatar = e.target.result;
                    document.getElementById('avatarPreview').src = e.target.result;
                    updateProfilePreview();
                };
                reader.readAsDataURL(file);
            }
        }

        function removeAvatar() {
            profileSettings.avatar = 'https://api.dicebear.com/7.x/avataaars/svg?seed=' + profileSettings.username;
            document.getElementById('avatarPreview').src = profileSettings.avatar;
            updateProfilePreview();
        }

        function updateUsername() {
            const username = document.getElementById('username').value.toLowerCase().replace(/[^a-z0-9_]/g, '');
            document.getElementById('username').value = username;
            profileSettings.username = username;
            document.getElementById('urlPreview').textContent = `wemint.app/@${username}`;
            updateProfilePreview();
        }

        function updateCharCount() {
            const bio = document.getElementById('bio').value;
            document.getElementById('charCount').textContent = bio.length;
            profileSettings.bio = bio;
        }

        function updateProfilePreview() {
            profileSettings.displayName = document.getElementById('displayName').value;
            profileSettings.bio = document.getElementById('bio').value;

            const iframe = document.getElementById('previewIframe');
            try {
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;

                const nameEl = iframeDoc.querySelector('.profile-name');
                if (nameEl) nameEl.textContent = profileSettings.displayName;

                const handleEl = iframeDoc.querySelector('.profile-handle');
                if (handleEl) handleEl.textContent = '@' + profileSettings.username;

                const bioEl = iframeDoc.querySelector('.profile-bio');
                if (bioEl) bioEl.textContent = profileSettings.bio;

                const avatarEl = iframeDoc.querySelector('.profile-avatar img');
                if (avatarEl) avatarEl.src = profileSettings.avatar;

                const ticketAvatarEl = iframeDoc.querySelector('.ticket-avatar-hero img');
                if (ticketAvatarEl) ticketAvatarEl.src = profileSettings.avatar;

                const socialLinks = iframeDoc.querySelector('.social-links');
                if (socialLinks) {
                    const icons = socialLinks.querySelectorAll('.social-icon');
                    icons.forEach((icon, index) => {
                        const socials = ['instagram', 'tiktok', 'youtube'];
                        if (socials[index] && profileSettings.socials[socials[index]]) {
                            icon.style.display = profileSettings.socials[socials[index]].enabled ? 'flex' : 'none';
                        }
                    });
                }
            } catch (e) {
                console.log('Cannot access iframe content');
            }
        }

        function saveProfileSettings() {
            profileSettings.displayName = document.getElementById('displayName').value;
            profileSettings.username = document.getElementById('username').value;
            profileSettings.bio = document.getElementById('bio').value;

            localStorage.setItem('wemint_profile', JSON.stringify(profileSettings));

            const btn = event && event.target ? event.target : null;
            if (btn) {
                const originalText = btn.innerHTML;
                btn.innerHTML = '✅ Saved!';
                btn.style.background = 'var(--accent)';

                setTimeout(() => {
                    btn.innerHTML = originalText;
                    btn.style.background = '';
                }, 2000);
            }

            const iframe = document.getElementById('previewIframe');
            if (iframe) {
                iframe.src = 'index.html';
            }
        }

        const socialPlatforms = [
            { key: 'instagram', label: 'Instagram', icon: '📸', placeholder: 'https://instagram.com/username' },
            { key: 'tiktok', label: 'TikTok', icon: '🎵', placeholder: 'https://tiktok.com/@username' },
            { key: 'youtube', label: 'YouTube', icon: '📺', placeholder: 'https://youtube.com/@channel' },
            { key: 'twitter', label: 'X (Twitter)', icon: '🐦', placeholder: 'https://x.com/username' },
            { key: 'facebook', label: 'Facebook', icon: '📘', placeholder: 'https://facebook.com/page' },
            { key: 'linkedin', label: 'LinkedIn', icon: '💼', placeholder: 'https://linkedin.com/in/username' },
            { key: 'website', label: 'Website', icon: '🌐', placeholder: 'https://yourwebsite.com' },
            { key: 'email', label: 'Email', icon: '✉️', placeholder: 'hello@example.com' }
        ];

        let activeSocialKey = 'instagram';

        function renderSocialLinksRow() {
            const row = document.getElementById('socialLinksRow');
            if (!row) return;

            row.innerHTML = socialPlatforms.map(platform => {
                const data = profileSettings.socials[platform.key];
                const isActive = data && data.enabled;
                const hasUrl = data && data.url;
                const stateClass = isActive ? 'active' : 'inactive';
                const title = hasUrl ? `${platform.label}: ${data.url}` : `${platform.label}: not set`;
                return `
                    <button class="social-icon-pill ${stateClass}" onclick="openSocialLinkModal('${platform.key}')" title="${title}">
                        <span class="social-icon">${platform.icon}</span>
                        <span class="social-plus">+</span>
                    </button>
                `;
            }).join('') + `
                <button class="social-icon-pill add" onclick="openSocialLinkModal()" title="Add social link">
                    <span class="social-icon">+</span>
                </button>
            `;
        }

        function openSocialLinkModal(key) {
            const modal = document.getElementById('socialLinkModal');
            if (!modal) return;
            if (key) activeSocialKey = key;

            const select = document.getElementById('socialPlatformSelect');
            const urlInput = document.getElementById('socialUrlInput');
            const enabledToggle = document.getElementById('socialEnabledToggle');

            select.value = activeSocialKey;
            const data = profileSettings.socials[activeSocialKey];
            const platform = socialPlatforms.find(p => p.key === activeSocialKey);

            urlInput.value = (data && data.url) ? data.url : '';
            urlInput.placeholder = platform ? platform.placeholder : 'https://...';
            enabledToggle.checked = data ? !!data.enabled : true;

            modal.classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeSocialLinkModal() {
            const modal = document.getElementById('socialLinkModal');
            if (!modal) return;
            modal.classList.remove('active');
            document.body.style.overflow = '';
        }

        function handleSocialPlatformChange(value) {
            activeSocialKey = value;
            const data = profileSettings.socials[activeSocialKey];
            const platform = socialPlatforms.find(p => p.key === activeSocialKey);
            const urlInput = document.getElementById('socialUrlInput');
            const enabledToggle = document.getElementById('socialEnabledToggle');
            if (urlInput) {
                urlInput.placeholder = platform ? platform.placeholder : 'https://...';
                urlInput.value = data && data.url ? data.url : '';
            }
            if (enabledToggle) {
                enabledToggle.checked = data ? !!data.enabled : true;
            }
        }

        function saveSocialLink(event) {
            event.preventDefault();
            const key = document.getElementById('socialPlatformSelect').value;
            const url = document.getElementById('socialUrlInput').value.trim();
            const enabled = document.getElementById('socialEnabledToggle').checked;

            profileSettings.socials[key] = {
                enabled: enabled && url.length > 0,
                url: url
            };

            activeSocialKey = key;
            localStorage.setItem('wemint_profile', JSON.stringify(profileSettings));

            renderSocialLinksRow();
            updateProfilePreview();
            closeSocialLinkModal();
        }

        // Dashboard-specific functions
        function copyBioLink() {
            navigator.clipboard.writeText('https://wemint.app/@creativestudio');

            // Show toast feedback
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '✅ Copied!';
            btn.style.background = 'var(--accent)';

            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.style.background = '';
            }, 2000);
        }

        function shareLink() {
            if (navigator.share) {
                navigator.share({
                    title: 'Creative Studio',
                    text: 'Check out my bio page!',
                    url: 'https://wemint.app/@creativestudio'
                });
            } else {
                copyBioLink();
            }
        }

        function refreshPreview() {
            const iframe = document.getElementById('previewIframe');
            iframe.src = iframe.src;
        }

        function openAddProductModal() {
            document.getElementById('addProductModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeAddProductModal() {
            document.getElementById('addProductModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        function openPaymentModal() {
            document.getElementById('paymentModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closePaymentModal() {
            document.getElementById('paymentModal').classList.remove('active');
            document.body.style.overflow = '';
        }

        function handleAddProduct(event) {
            event.preventDefault();
            alert('Product created! (Demo)');
            closeAddProductModal();
        }

        function handlePaymentSave(event) {
            event.preventDefault();
            alert('Payment details saved! (Demo)');
            closePaymentModal();
        }

        function viewProductStats(productId) {
            alert('Viewing stats for product ' + productId + ' (Demo)');
        }

        // Initialize product type selection
        document.querySelectorAll('#addProductModal .payment-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('#addProductModal .payment-option').forEach(o => o.classList.remove('selected'));
                this.classList.add('selected');
                this.querySelector('input').checked = true;
            });
        });

        // Initialize payment method selection
        document.querySelectorAll('#paymentModal .payment-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('#paymentModal .payment-option').forEach(o => o.classList.remove('selected'));
                this.classList.add('selected');
                this.querySelector('input').checked = true;
            });
        });

        // ========== Affiliate Links Functions ==========

        // Mock affiliate data
        const affiliateLinks = [
            {
                id: 1,
                name: 'Sony WH-1000XM5',
                review: 'หูฟังตัดเสียงที่ดีที่สุด เสียงดี แบตอึด ใส่สบาย 🔥',
                url: 'https://amzn.to/sony-wh1000xm5',
                image: 'https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=100&h=100&fit=crop',
                clicks: 1247,
                earnings: 312.50,
                status: 'active'
            },
            {
                id: 2,
                name: 'Apple Watch Ultra 2',
                review: 'สมาร์ทวอทช์สำหรับคนรักสุขภาพ แบตอยู่ได้หลายวัน 💪',
                url: 'https://amzn.to/apple-watch-ultra',
                image: 'https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=100&h=100&fit=crop',
                clicks: 892,
                earnings: 445.00,
                status: 'active'
            },
            {
                id: 3,
                name: 'Kindle Paperwhite',
                review: 'อ่านหนังสือไม่เจ็บตา จอ e-ink ชัดมาก 📚',
                url: 'https://amzn.to/kindle-paperwhite',
                image: 'https://images.unsplash.com/photo-1585386959984-a4155224a1ad?w=100&h=100&fit=crop',
                clicks: 654,
                earnings: 98.10,
                status: 'active'
            },
            {
                id: 4,
                name: 'Nike Air Max 90',
                review: 'รองเท้าสวยใส่สบาย ไม่ต้องพอกหน้า 👟',
                url: 'https://amzn.to/nike-airmax90',
                image: 'https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?w=100&h=100&fit=crop',
                clicks: 423,
                earnings: 67.80,
                status: 'draft'
            }
        ];

        let editingAffiliateId = null;

        function openAddAffiliateModal() {
            document.getElementById('addAffiliateModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeAddAffiliateModal() {
            document.getElementById('addAffiliateModal').classList.remove('active');
            document.body.style.overflow = '';
            // Reset form
            document.getElementById('affiliateProductName').value = '';
            document.getElementById('affiliateUrl').value = '';
            document.getElementById('affiliateReview').value = '';
            document.getElementById('affiliateImageUrl').value = '';
            document.getElementById('affiliateImagePreview').style.display = 'none';
        }

        function handleAddAffiliate(event) {
            event.preventDefault();
            const name = document.getElementById('affiliateProductName').value;
            const review = document.getElementById('affiliateReview').value;

            alert(`✅ Affiliate Link "${name}" added successfully!\n\nReview: ${review}\n\n(Demo mode)`);
            closeAddAffiliateModal();
        }

        function previewAffiliateImage(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('affiliateImagePreviewImg').src = e.target.result;
                    document.getElementById('affiliateImagePreview').style.display = 'block';
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function editAffiliate(id) {
            editingAffiliateId = id;
            const affiliate = affiliateLinks.find(a => a.id === id);
            if (!affiliate) return;

            document.getElementById('editAffiliateProductName').value = affiliate.name;
            document.getElementById('editAffiliateUrl').value = affiliate.url;
            document.getElementById('editAffiliateReview').value = affiliate.review;
            document.getElementById('editAffiliateImageUrl').value = affiliate.image;
            document.getElementById('editAffiliateImagePreview').src = affiliate.image;
            document.getElementById('editAffiliateStatus').value = affiliate.status;

            document.getElementById('editAffiliateModal').classList.add('active');
            document.body.style.overflow = 'hidden';
        }

        function closeEditAffiliateModal() {
            document.getElementById('editAffiliateModal').classList.remove('active');
            document.body.style.overflow = '';
            editingAffiliateId = null;
        }

        function saveEditedAffiliate(event) {
            event.preventDefault();
            const name = document.getElementById('editAffiliateProductName').value;
            alert(`✅ Affiliate Link "${name}" updated successfully! (Demo mode)`);
            closeEditAffiliateModal();
        }

        function copyAffiliateLink(id) {
            const affiliate = affiliateLinks.find(a => a.id === id);
            if (!affiliate) return;

            navigator.clipboard.writeText(affiliate.url);
            alert(`📋 Link copied!\n\n${affiliate.url}`);
        }

        function deleteAffiliate(id) {
            const affiliate = affiliateLinks.find(a => a.id === id);
            if (!affiliate) return;

            if (confirm(`🗑️ Are you sure you want to delete "${affiliate.name}"?`)) {
                alert(`✅ "${affiliate.name}" deleted! (Demo mode)`);
            }
        }

        function initAccordionToggles() {
            document.querySelectorAll('.dashboard-card[data-accordion] .card-header').forEach((header) => {
                header.addEventListener('click', (event) => {
                    if (event.target.closest('button, a, input, select, textarea, label')) {
                        return;
                    }
                    const card = header.closest('.dashboard-card');
                    if (!card) return;
                    card.classList.toggle('is-collapsed');
                });
            });
        }

        function initMintModeToggle() {
            const options = document.querySelectorAll('.mint-mode-option');
            const previews = {
                metaphor: document.querySelector('.mint-preview-metaphor'),
                simple: document.querySelector('.mint-preview-simple')
            };
            const panels = {
                metaphor: document.querySelector('.mint-settings-metaphor'),
                simple: document.querySelector('.mint-settings-simple')
            };

            function applyMode(mode) {
                options.forEach(option => {
                    option.classList.toggle('selected', option.dataset.mode === mode);
                });
                Object.entries(previews).forEach(([key, el]) => {
                    if (el) el.classList.toggle('is-hidden', key !== mode);
                });
                Object.entries(panels).forEach(([key, el]) => {
                    if (el) el.classList.toggle('is-hidden', key !== mode);
                });
                updateMintPreviewMode(mode);
                updateMintPreviewContent(mode);
            }

            const checked = document.querySelector('input[name="mintMode"]:checked');
            applyMode(checked ? checked.value : 'simple');

            document.querySelectorAll('input[name="mintMode"]').forEach((input) => {
                input.addEventListener('change', () => applyMode(input.value));
            });

            const mintInputs = [
                'mintMetaphorLabel',
                'mintMetaphorUnitPrice',
                'mintMetaphorMinPrice',
                'mintButtonWordingMetaphor',
                'mintThankYouMetaphor',
                'mintAmount1',
                'mintAmount2',
                'mintAmount3',
                'mintSimpleMinPrice',
                'mintButtonWordingSimple',
                'mintThankYouSimple'
            ];

            mintInputs.forEach((id) => {
                const el = document.getElementById(id);
                if (!el) return;
                el.addEventListener('input', () => {
                    const mode = document.querySelector('input[name="mintMode"]:checked')?.value || 'simple';
                    updateMintPreviewContent(mode);
                });
                el.addEventListener('change', () => {
                    const mode = document.querySelector('input[name="mintMode"]:checked')?.value || 'simple';
                    updateMintPreviewContent(mode);
                });
            });
        }

        function initSidebarNav() {
            const navItems = Array.from(document.querySelectorAll('.sidebar-nav .nav-item'));
            if (!navItems.length) return;

            const sections = navItems
                .map(item => document.getElementById(item.dataset.target))
                .filter(Boolean);

            const setActive = (id) => {
                navItems.forEach(item => {
                    item.classList.toggle('active', item.dataset.target === id);
                });
            };

            const scrollToSection = (id) => {
                const target = document.getElementById(id);
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            };

            let navLockTarget = null;
            let navLockUntil = 0;

            navItems.forEach(item => {
                item.addEventListener('click', (event) => {
                    event.preventDefault();
                    const targetId = item.dataset.target;
                    if (!targetId) return;
                    navLockTarget = targetId;
                    navLockUntil = Date.now() + 800;
                    scrollToSection(targetId);
                    setActive(targetId);
                    history.replaceState(null, '', `#${targetId}`);
                });
            });

            let ticking = false;
            const onScroll = () => {
                if (ticking) return;
                ticking = true;
                window.requestAnimationFrame(() => {
                    const offset = 120;
                    let currentId = null;
                    sections.forEach(section => {
                        const rect = section.getBoundingClientRect();
                        if (rect.top - offset <= 0) {
                            currentId = section.id;
                        }
                    });
                    if (!currentId && sections.length) {
                        currentId = sections[0].id;
                    }
                    if (currentId) {
                        if (Date.now() < navLockUntil && navLockTarget && currentId !== navLockTarget) {
                            ticking = false;
                            return;
                        }
                        setActive(currentId);
                    }
                    ticking = false;
                });
            };

            window.addEventListener('scroll', onScroll, { passive: true });

            const hash = window.location.hash.replace('#', '');
            if (hash && sections.some(section => section.id === hash)) {
                setActive(hash);
            } else if (sections.length) {
                setActive(sections[0].id);
            }
            onScroll();
        }

        function updateMintPreviewMode(mode) {
            const iframe = document.getElementById('previewIframe');
            if (!iframe) return;

            try {
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                const amountsEl = iframeDoc.getElementById('mintAmounts');
                if (mode === 'metaphor') {
                    if (amountsEl) amountsEl.style.display = 'none';
                } else {
                    if (amountsEl) amountsEl.style.display = '';
                }
            } catch (e) {
                console.log('Cannot access iframe content');
            }
        }

        function updateMintPreviewContent(mode) {
            const iframe = document.getElementById('previewIframe');
            if (!iframe) return;

            const metaphorLabel = document.getElementById('mintMetaphorLabel')?.value?.trim() || 'Coffee';
            const metaphorUnit = document.getElementById('mintMetaphorUnitPrice')?.value?.trim() || '5';
            const buttonMetaphor = document.getElementById('mintButtonWordingMetaphor')?.value || 'Mint';
            const buttonSimple = document.getElementById('mintButtonWordingSimple')?.value || 'Mint';
            const amount1 = document.getElementById('mintAmount1')?.value?.trim() || '5';
            const amount2 = document.getElementById('mintAmount2')?.value?.trim() || '10';
            const amount3 = document.getElementById('mintAmount3')?.value?.trim() || '15';

            const previewMetaphorTitle = document.getElementById('mintPreviewMetaphorTitle');
            const previewMetaphorUnit = document.getElementById('mintPreviewMetaphorUnit');
            const previewMetaphorButton = document.getElementById('mintPreviewMetaphorButton');
            if (previewMetaphorTitle) previewMetaphorTitle.textContent = `Mint a ${metaphorLabel.toLowerCase()} for @creativestudio`;
            if (previewMetaphorUnit) previewMetaphorUnit.textContent = `$${metaphorUnit} each`;
            if (previewMetaphorButton) previewMetaphorButton.textContent = buttonMetaphor;

            const simpleButton = document.getElementById('mintPreviewSimpleButton');
            if (simpleButton) simpleButton.textContent = buttonSimple;

            try {
                const iframeDoc = iframe.contentDocument || iframe.contentWindow.document;
                const titleEl = iframeDoc.getElementById('mintTitle');
                const subtitleEl = iframeDoc.getElementById('mintSubtitle');
                const badgeEl = iframeDoc.getElementById('mintBadge');
                const buttonEl = iframeDoc.getElementById('mintButton');
                const noteEl = iframeDoc.getElementById('mintNote');
                const amountsEl = iframeDoc.getElementById('mintAmounts');

                if (mode === 'metaphor') {
                    if (titleEl) titleEl.textContent = `Mint a ${metaphorLabel.toLowerCase()}`;
                    if (subtitleEl) subtitleEl.textContent = `Unit price $${metaphorUnit} each`;
                    if (badgeEl) badgeEl.textContent = 'Unit price';
                    if (buttonEl) buttonEl.textContent = buttonMetaphor;
                    if (noteEl) noteEl.textContent = 'Set a unit price and let supporters choose quantity.';
                } else {
                    if (titleEl) titleEl.textContent = 'Send a mint in USDC or USDT';
                    if (subtitleEl) subtitleEl.textContent = 'Instant support. Instant receipt. No platform hold.';
                    if (badgeEl) badgeEl.textContent = '0% fee on USDC/USDT';
                    if (buttonEl) buttonEl.textContent = buttonSimple;
                    if (noteEl) noteEl.textContent = 'Wallet-first checkout. Bank transfer available if needed.';
                }

                if (amountsEl) {
                    const buttons = amountsEl.querySelectorAll('.mint-amount-btn');
                    if (buttons[0]) buttons[0].textContent = `$${amount1}`;
                    if (buttons[1]) buttons[1].textContent = `$${amount2}`;
                    if (buttons[2]) buttons[2].textContent = `$${amount3}`;
                }
            } catch (e) {
                console.log('Cannot access iframe content');
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            loadAppearanceSettings();
            loadProfileSettings();
            initAccordionToggles();
            initMintModeToggle();
            initSidebarNav();

            const iframe = document.getElementById('previewIframe');
            if (iframe) {
                iframe.addEventListener('load', function() {
                    updateAppearancePreview();
                    updateProfilePreview();
                });
            }
        });

        // Initialize affiliate status selection
        document.querySelectorAll('#addAffiliateModal .payment-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('#addAffiliateModal .payment-option').forEach(o => o.classList.remove('selected'));
                this.classList.add('selected');
                this.querySelector('input').checked = true;
            });
        });
    </script>
</body>
</html>
